"use strict";
/*!
 *
 * Copyright 2017 - acrazing
 *
 * @author acrazing joking.young@gmail.com
 * @since 2017-12-15 12:29:38
 * @version 1.0.0
 * @desc sleep.ts
 */
Object.defineProperty(exports, "__esModule", { value: true });
const consts_1 = require("./consts");
function sleep(time) {
    let clear = consts_1.ANY;
    const timer = new Promise((resolve, reject) => {
        let state = 'pending';
        const handle = setTimeout(() => {
            if (state === 'pending') {
                state = 'fulfilled';
                resolve();
            }
        }, time);
        clear = (_resolve) => {
            if (state === 'pending') {
                state = 'rejected';
                clearTimeout(handle);
                if (_resolve === true) {
                    resolve(void 0);
                }
                else {
                    reject();
                }
            }
        };
    });
    timer.interrupt = clear;
    return timer;
}
exports.sleep = sleep;
//# sourceMappingURL=sleep.js.map